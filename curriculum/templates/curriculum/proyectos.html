{% extends 'curriculum/base.html' %}

{% block title %}Productos Académicos | Valeria Meza{% endblock %}

{% block content %}
<div class="fade-in max-w-7xl mx-auto px-4 pb-20">
    <!-- Encabezado con Estilo Valeria -->
    <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
        <div class="animate-in slide-in-from-left duration-700">
            <h2 class="text-6xl md:text-7xl font-black italic uppercase tracking-tighter text-[#1a1a1a] dark:text-white leading-none">
                Productos <br><span class="text-purple-500">Académicos</span>
            </h2>
            <div class="h-2 w-24 bg-purple-400 mt-6 rounded-full"></div>
        </div>
        <div class="text-right border-r-4 border-purple-500 pr-6 animate-in fade-in duration-1000">
            <p class="text-gray-400 font-bold text-[10px] uppercase tracking-[0.4em]">Producción Intelectual & Técnica</p>
            <p class="text-purple-300 text-[9px] font-black uppercase mt-2 tracking-widest">Sincronizado con Base de Datos</p>
        </div>
    </div>

    <!-- Rejilla de Productos - Ajustada para mayor ancho -->
    <div class="grid md:grid-cols-2 gap-8 lg:gap-10 max-w-6xl mx-auto">
        {% for prod in proyectos %}
        <div class="bg-white dark:bg-[#121212] p-6 md:p-8 rounded-[3rem] border border-gray-100 dark:border-white/5 shadow-sm relative overflow-hidden group hover:shadow-2xl transition-all duration-500 flex flex-col h-full hover:-translate-y-2">
            
            <!-- Decoración de fondo sutil -->
            <div class="absolute -right-10 -top-10 w-32 h-32 bg-purple-50 dark:bg-purple-900/10 rounded-full blur-3xl -z-0 group-hover:bg-purple-100 dark:group-hover:bg-purple-900/20 transition-colors duration-700"></div>

            <!-- Contenedor de Icono reducido en margen -->
            <div class="p-4 bg-purple-50 dark:bg-purple-900/20 text-purple-500 rounded-2xl w-fit mb-4 group-hover:rotate-12 transition-all duration-500 relative z-10 border border-purple-100 dark:border-purple-500/20">
                <i data-lucide="layers" size="24"></i>
            </div>
            
            <!-- Título del producto -->
            <h3 class="text-2xl font-black uppercase text-gray-900 dark:text-gray-100 leading-tight mb-3 relative z-10 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300">
                {{ prod.nombre }}
            </h3>
            
            <!-- Categorías -->
            <div class="flex flex-wrap gap-2 mb-4 relative z-10">
                {% with cats=prod.categorias.all %}
                    {% if cats %}
                        {% for cat in cats %}
                        <span class="px-3 py-1 bg-gray-50 dark:bg-white/5 text-gray-400 dark:text-gray-500 rounded-lg text-[8px] font-black uppercase tracking-widest border border-gray-100 dark:border-white/10 group-hover:border-purple-200 dark:group-hover:border-purple-500/30 group-hover:text-purple-500 group-hover:bg-purple-50 transition-all duration-300">
                            #{{ cat.nombre }}
                        </span>
                        {% endfor %}
                    {% else %}
                        <span class="text-[8px] font-bold text-gray-300 dark:text-gray-700 uppercase tracking-widest italic">Sin Clasificar</span>
                    {% endif %}
                {% endwith %}
            </div>
            
            <!-- Descripción detallada - Reducido el margen inferior -->
            <div class="flex-grow relative z-10">
                <p class="text-sm text-gray-500 dark:text-gray-400 font-medium italic leading-relaxed mb-6">
                    "{{ prod.descripcion }}"
                </p>
            </div>
            
            <!-- Footer de la tarjeta: ID y Fecha -->
            <div class="pt-4 border-t border-gray-50 dark:border-white/5 flex justify-between items-center relative z-10 mt-auto">
                <div class="flex flex-col">
                    <span class="text-[7px] text-gray-400 font-black uppercase tracking-tighter mb-1">ID / Registro</span>
                    <span class="text-gray-800 dark:text-gray-200 text-[9px] font-black tracking-widest bg-gray-50 dark:bg-white/5 px-2 py-0.5 rounded-md">
                        {{ prod.registro_id|default:"S/N" }}
                    </span>
                </div>
                <div class="text-right">
                    <span class="text-[7px] text-gray-400 font-black uppercase tracking-tighter mb-1 block">Publicación</span>
                    <span class="text-purple-500 text-[9px] font-black italic bg-purple-50 dark:bg-purple-900/20 px-2 py-0.5 rounded-md">
                        {{ prod.fecha_publicacion|date:"Y-m-d" }}
                    </span>
                </div>
            </div>
            
            <!-- Botón de acción - Ajustado para ser menos alto -->
            <div class="mt-6 relative z-10">
                {% if prod.archivo %}
                <a href="{{ prod.archivo.url }}" 
                   target="_blank" 
                   class="w-full py-4 bg-[#1a1a1a] dark:bg-purple-600 text-white rounded-2xl text-[9px] font-black uppercase text-center tracking-[0.2em] hover:bg-purple-600 dark:hover:bg-purple-500 transition-all duration-300 shadow-lg flex items-center justify-center gap-3 active:scale-95">
                    <i data-lucide="external-link" size="14"></i> 
                    Obtener Recurso
                </a>
                {% else %}
                <div class="w-full py-4 bg-gray-50 dark:bg-white/5 text-gray-300 dark:text-gray-700 rounded-2xl text-[9px] font-black uppercase text-center tracking-[0.2em] border border-dashed border-gray-200 dark:border-white/10 cursor-not-allowed">
                    No Disponible
                </div>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="col-span-full py-20 text-center bg-white dark:bg-[#121212] rounded-[4rem] border-4 border-dashed border-gray-50 dark:border-white/5">
            <div class="bg-gray-50 dark:bg-white/5 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="archive-x" size="32" class="text-gray-200 dark:text-gray-800"></i>
            </div>
            <p class="text-xl text-gray-300 dark:text-gray-700 italic font-black uppercase tracking-widest">Sin productos registrados.</p>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        if (window.lucide) {
            lucide.createIcons();
        }
    });
</script>

<style>
    .fade-in {
        animation: fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
{% endblock %}